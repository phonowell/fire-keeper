# CLAUDE.md

## å…³é”®çº¦æŸ

- ä»…é»˜è®¤å¯¼å‡ºï¼š`src/*.ts` ä»… `export default fn`
- è‡ªåŠ¨ç”Ÿæˆç¦ç¼–è¾‘ï¼š`dist/` Â· `src/index.ts` Â· `package.json` exports Â· `rollup.config.js` input
- ç›¸å¯¹å¯¼å…¥å¿…å¸¦ `.js`ï¼š`import x from './x.js'`
- æ”¹ä»£ç å¿…æ”¹æµ‹è¯•
- ç®€å•ä»»åŠ¡ç”¨ haiku Â· è¾“å‡º tokens 5x ä»·æ ¼ï¼Œæƒœå­—å¦‚é‡‘
- å…ƒåŸåˆ™ï¼šç²¾ç®€å†—ä½™ Â· å†²çªä¿¡ä»£ç 
- å®¢è§‚è¯šå®ï¼šä¸ä¸»è§‚è¯„ä»· Â· ä¸å› ç”¨æˆ·æƒ…ç»ªè½¬ç§»ç«‹åœº Â· ä¸ç¼–é€ äº‹å® Â· ç«‹åˆ»æš´éœ²ä¸ç¡®å®šä¿¡æ¯
- ç±»å‹è§„èŒƒï¼šâ‰¥5 å¤„éç©ºæ–­è¨€ç«‹å³é‡æ„ç±»å‹æ¶æ„ï¼ˆğŸš« eslint-disable æ‰¹é‡å‹åˆ¶ï¼‰
- TodoWriteï¼šâ‰¥3 æ­¥éª¤ä»»åŠ¡å¿…é¡»å»º todo Â· å®æ—¶æ›´æ–°çŠ¶æ€ Â· å®Œæˆç«‹å³æ ‡è®°

## æŠ€æœ¯æ ˆ

- Node.js/TS Â· çº¯ ESM Â· Node â‰¥24
- Vitestï¼ˆ`fileParallelism: false`ï¼‰Â· Rollup

## æ ¸å¿ƒå‘½ä»¤

- `pnpm test` ä¸²è¡Œ
- `pnpm build` æµ‹è¯•â†’é‡å†™é…ç½®â†’æ‰“åŒ…
- `pnpm lint`
- `pnpm task [name]`

## ç›®å½•ç»“æ„

- `src/` é»˜è®¤å¯¼å‡º Â· `test/` å¯¹åº”æµ‹è¯• Â· `dist/` è‡ªåŠ¨ç”Ÿæˆ
- `tasks/index.ts` åŠ¨æ€å‘ç°ï¼›å‘½å `subdir@file` â†’ æ‰§è¡Œ `file/subdir`
- ä¸´æ—¶æ–‡ä»¶ `temp/<æ¨¡å—>/` + `beforeEach`/`afterEach` æ¸…ç†
- `@/*` ä»…æµ‹è¯•ç”¨

## å·¥ä½œæµ

- TDDï¼š`test/<name>.test.ts` â†’ `src/<name>.ts`
- æ–°å¢å·¥å…·ï¼šç”¨ä¾‹å…ˆè¡Œ â†’ é»˜è®¤å¯¼å‡º â†’ `pnpm build` è‡ªåŠ¨é‡å†™é…ç½®
- æµ‹è¯•è¦†ç›–ï¼šâœ… ä¸šåŠ¡é€»è¾‘/å‚æ•°éªŒè¯/é”™è¯¯å¤„ç†/é¡¹ç›®ç‰¹æœ‰åŠŸèƒ½ï¼ˆ`ListSource` Â· `echo` è·¯å¾„ç®€åŒ–ï¼‰/è·¨å¹³å° Â· ğŸš« ç¬¬ä¸‰æ–¹åº“/JS åŸç”Ÿ/OS è¾“å‡º/æ—¶é—´ç²¾åº¦
- å¸¸è§å‘ï¼šç¼–è¾‘è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶/å‘½åå¯¼å‡º/å¯¼å…¥å¿˜ `.js`/æ”¹ä»£ç å¿˜æ”¹æµ‹è¯•/æ•°ç»„ç´¢å¼•æœªåˆ¤ç©ºï¼ˆ`noUncheckedIndexedAccess`ï¼‰/æµ‹è¯•å‡å®šå¹¶è¡Œ/`echo` ç”¨ç»å¯¹è·¯å¾„/æµ‹è¯•ç¬¬ä¸‰æ–¹åº“

## Skill ä½¿ç”¨

- ä»»åŠ¡åŒ¹é… skill åˆ—è¡¨â†’å…ˆå¼€å¯¹åº” `SKILL.md` æŒ‰æµç¨‹æ‰§è¡Œï¼›å¤š skill æŒ‰é¡ºåºï¼›ç¼ºå¤±/ä¸å¯è¯»åˆ™è¯´æ˜å¹¶å›é€€

## ä»£ç è§„èŒƒ

- `import type { T }` Â· ä¼˜å…ˆ `type` é `interface` Â· ç¦ `public`
- æ•°ç»„è®¿é—®è¿”å› `T | undefined` å¿…æ£€æŸ¥ï¼š`const x = arr.at(0); if (!x) return`
- `glob()` è¿”å› `ListSource` å“ç‰Œç±»å‹ç¼“å­˜é‡ç”¨
- `echo(tag, msg)`/`echo(msg)` Â· è·¯å¾„ç®€åŒ– `.`/`~` Â· é™é»˜ `freeze/whisper/pause/resume` Â· æ— åŒ¹é…éœ€ `echo('mod', 'no files found ...')` + æ—©è¿”å›
- ESLintï¼šç¦ `public` Â· å¼ºåˆ¶ `import type` Â· ä¼˜å…ˆ `type` Â· ç›¸å¯¹å¯¼å…¥éœ€ `.js` Â· å¯¼å…¥æ’åº Â· ç§»é™¤æœªä½¿ç”¨å¯¼å…¥ Â· Prettierï¼ˆæ— åˆ†å·/å•å¼•å·/å°¾éšé€—å·ï¼‰

**æ–‡ä»¶æ“ä½œæ¨¡æ¿**

```typescript
const fn = async (source: string | string[], { concurrency = 5 }: Options = {}) => {
  const listSource = await glob(source)
  if (!listSource.length) { echo('fn', `no files found matching ${wrapList(source)}`); return }
  await runConcurrent(concurrency, listSource.map(src => async () => { /* ... */ }))
  echo('fn', `processed ${wrapList(source)}`)
}
```

## è¾“å‡ºæ ¼å¼

- ç¦é¢„å‘Šæ–‡å­— Â· çŠ¶æ€ç”¨ç¬¦å· âœ“/âœ—/â†’ Â· ä¸€æ¬¡æ€§æ‰¹é‡ Edit Â· æ•°æ®ä¼˜å…ˆ Â· ç›´è¾¾ç»“è®º Â· å·¥å…·é—´éš”é›¶è¾“å‡º Â· é”™è¯¯æ ¼å¼ `âœ— {ä½ç½®}:{ç±»å‹}` Â· ä»£ç å—é›¶æ³¨é‡Š Â· â‰¥2 æ¡ç”¨åˆ—è¡¨ Â· è·¯å¾„ç¼©å†™ï¼ˆ. é¡¹ç›®æ ¹ Â· ~ ä¸»ç›®å½•ï¼‰Â· ç¦æ€»ç»“æ€§é‡å¤ Â· è¿›åº¦ {å½“å‰}/{æ€»æ•°} Â· æé—®ç›´å…¥
